<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reddit Bot Generator</title>
  <script src="https://kit.fontawesome.com/1ad022fbba.js" crossorigin="anonymous"></script>
  <link ref="stylesheet" href="./src/style.css">
  <link href='https://fonts.googleapis.com/css?family=Poppins:wght@300;400;500;600;700;800;900'>
  <script src="./src/script.js"></script>

  <style>
    body {
      background: #2d383a;
      padding: 20px;
      font-family: 'Poppins', sans-serif;
      color: #333;
      box-sizing: border-box;
    }

    .container {
      max-width: 700px;
      margin: 0px auto;
      background: transparent;
      padding: 25px;
      border-radius: 12px;
    }

    label {
      font-weight: 500;
      display: block;
      margin-top: 12px;
    }
    
    input,
    textarea {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }

    pre {
      background: #111;
      color: #0f0;
      padding: 15px;
      margin-top: 20px;
      border-radius: 8px;
      overflow-x: auto;
      font-size: 13px;
      display: none;
    }

    *,
    *:before,
    *:after {
      -moz-box-sizing: border-box;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    form {
      max-width: 300px;
      margin: 0 auto;
      padding: 20px;
      background: #f4f7f8;
      border-radius: 16px;
      box-shadow: 0 0 16px 20px rgba(50, 50, 50, 0.2);
      transform: scale(.9);
    }

    h1 {
      margin: 0;
      text-align: center;
      color: orangered;
      font-weight: 600;
      font-size: 3rem;
    }

    input[type="text"],
    input[type="password"],
    input[type="date"],
    input[type="datetime"],
    input[type="email"],
    input[type="number"],
    input[type="search"],
    input[type="tel"],
    input[type="time"],
    input[type="url"],
    textarea,
    select {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      font-size: 16px;
      height: auto;
      margin: 0;
      outline: 0;
      padding: 12px;
      width: 100%;
      background-color: #e8eeef;
      color: #000;
      box-shadow: 0 1px 0 rgba(0, 0, 0, 0.03) inset;
      margin-bottom: 30px;
    }

    input[type="radio"],
    input[type="checkbox"] {
      margin: 0 4px 8px 0;
    }

    #content {
      width: 100%;
      margin: 0 0 10px;
      height: 120px;
      padding-top: 5px;
    }

    p#note {
      font-size: 10px;
      font-weight: 300;
      line-height: 1;
      color: #333;
      margin-top: -10px;
      margin-bottom: 30px;
    }

    select {
      padding: 6px;
      height: 42px;
      border-radius: 2px;
    }

    button {
      color: #FFF;
      background-color: orangered;
      text-align: center;
      letter-spacing: .5px;
      border-radius: 50px;
      border: 2px solid orangered;
      text-transform: capitalize;
      transition: .2s ease;
    }

    button:hover {
      background: white;
      color: orangered;
      border: 2px solid orangered;
      box-shadow: 2px 4px 16px 6px rgba(255, 69, 0, .2);
    }

    button:active {
      transform: scale(.8);
    }

    fieldset {
      margin-bottom: 30px;
      border: none;
    }

    legend {
      font-size: 20px;
      font-weight: 600500;
      margin: 20px auto 30px;
      color: orangered;
    }

    label {
      display: block;
      margin-bottom: 8px;
    }

    label.light {
      font-weight: 300;
      display: inline;
    }

    #icon {
      position: absolute;
      margin-left: -33px;
      margin-top: 8px;
      font-size: 21px;
      cursor: pointer;
    }

    #icon:hover {
      color: orangered;
      filter: brightness(1.2);
    }

    #icon:active {
      filter: brightness(0.8);
      transform: scale(.85);
    }

    .number {
      background-color: orangered;
      color: #fff;
      height: 28px;
      width: 28px;
      display: inline-block;
      font-size: 0.75em;
      font-weight: 600;
      margin-right: 4px;
      line-height: 30px;
      text-align: center;
      text-shadow: 0 1px 0 rgba(255, 255, 255, 0.2);
      border-radius: 100%;
    }

    @media screen and (min-width: 480px) {

      form {
        max-width: 480px;
      }

    }

    h2 {
      text-indent: 8px;
    }

    h2,
    h3 {
      margin: 0;
      padding: 5px 0;
      font-size: 20px;
      font-weight: 600;
    }

    .modal, .modal2 {
      display: none;
      position: fixed;
      z-index: 1;
      padding: 0px;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgb(0, 0, 0);
      background-color: rgba(0, 0, 0, 0.4);
    }

    .modal-ctr, .modal2-ctr {
      display: block;
      position: relative;
      margin: 25px auto;
      width: 100%;
      text-align: center;
    }

    /* Modal Content */
    .modal-content, .modal2-content {
      position: relative;
      background-color: #fefefe;
      margin: auto;
      padding: 0;
      border: 1px solid #888;
      width: 80%;
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
      -webkit-animation-name: animatetop;
      -webkit-animation-duration: 0.4s;
      animation-name: animatetop;
      animation-duration: 0.4s
    }

    /* Add Animation */
    @-webkit-keyframes animatetop {
      from {
        top: -300px;
        opacity: 0
      }

      to {
        top: 0;
        opacity: 1
      }
    }

    @keyframes animatetop {
      from {
        top: -300px;
        opacity: 0
      }

      to {
        top: 0;
        opacity: 1
      }
    }

    /* The Close Button */
    .close, .close2 {
      color: white;
      float: right;
      font-size: 36px;
      font-weight: 700;
      padding-right: 10px;
      margin-top: -6px;
      transition: .2s ease-out;
    }

    .close:hover,
    .close:focus {
      text-decoration: none;
      cursor: pointer;
      transform: scale(1.2);
    }

    .close2:hover, .close2:focus {
      text-decoration: none;
      cursor: pointer;
      transform: scale(1.2);
    }

    .close:active, .close2:active {
      transform: scale(.8);
      text-shadow: 2px 2px rgba(0, 0, 0, 1);
    }

    .modal-header, .modal2-header {
      padding: 3px;
      background-color: orangered;
      color: white;
    }

    .modal-body, .modal2-body {
      padding: 2px 20px;
      text-indent: -17px;
      margin-left: 17px;
    }

    .modal-footer, .modal2-footer {
      padding: 2px;
      background-color: orangered;
      color: white;
    }

    #modal-div, #modal2-div {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #modal-btn, #modal2-btn {
      display: inline-block;
      width: 25vw;
      height: 50px;
      border-radius: 5px;
      padding: 10px 20px;
      color: orangered;
      background: white;
      border: 3px solid orangered;
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
      margin: 0 auto;
      letter-spacing: 1px;
      cursor: pointer;
      transition: .2s ease;
    }

    #modal-btn:hover, #modal2-btn:hover {
      background: orangered;
      color: #fff;
      letter-spacing: .5px;
      box-shadow: 2px 2px 18px 10px rgba(0, 0, 0, .2);
    }

    ol {
  padding-inline-start: 0;
  margin-block-end: 1em;
  counter-reset: section;
}

ol li {
  display: block;
  font-size: 13px;
}

ol > li {
  counter-increment: section;
}

ol > li::before {
  content: counter(section) ". ";
  font-weight: bold;
}

ol > li > ol {
  counter-reset: subsection;
}

ol > li > ol > li {
  counter-increment: subsection;
}

ol > li > ol > li::before {
  content: counter(section) "." counter(subsection) " ";
  margin-inline-end: 0.2em;
}

ol > li > ol > li > ol {
  counter-reset: subsubsection;
}

ol > li > ol > li > ol > li {
  counter-increment: subsubsection;
}

ol > li > ol > li > ol > li::before {
  content: counter(section) "." counter(subsection) "." counter(subsubsection) " ";
}

ol ol {
  margin-block-end: 0;
  padding-inline-start: 1.5em;
}

    .small {
      font-size: 10px;
      font-weight: 300;
      color: #333;
    }

    a {
      color: #000;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
      text-decoration-color: orangered;
      text-decoration-thickness: 1.5px;
      text-decoration-line: solid;
      color: orangered;
    }

    #submitBtn {
      width: 100%;
      border-radius: 5px;
      padding: 10px 20px;
      margin: 10px auto;
      font-size: 16px;
      font-weight: 600;
    }

    #copyBtn {
      width: 40px;
      height: 40px;
      display: absolute;
      top: 0;
      right: 0;
      margin-right: 10px;
      margin-top: 10px;
      color: #666;
      background: transparent;
      border: none;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
    }

    .subtext {
      font-size: 10px;
      font-weight: 300;
    }

    #heading-ctr {
      display: block;
      position: relative;
      margin: 50px auto;
    }
  </style>
</head>

<body>
  <div id="heading-ctr">
    <h1>Reddit Bot Script Generator</h1>
  </div>
  <div class="modal-ctr" id="modal-container">
    <button id="modal-btn">Instructions</button>
  </div>
  <div id="modal-div"></div><!-- The Modal -->
  <div id="myModal" class="modal">
    <!-- Modal content -->
    <div class="modal-content">
      <div class="modal-header">
        <span class="close">&times;</span>
        <h2>How to Create an App in Reddit</h2>
      </div>
      <div class="modal-body">
        <ol>
          <li>Go to <a href="https://devvit.com" target="_blank">https://devvit.com</a></li>
          <li>Log In or Sign Up if you don't have an account</li>
          <li>Go to <a href="https://reddit.com/prefs/apps" target="_blank">https://reddit.com/prefs/apps</a></li>
          <li>Click 'Create another app'</li>
          <li>Enter app name</li>
          <li>Select 'Script'</li>
          <li>Enter description</li>
          <li>For 'redirect uri', enter 'https://localhost:8080'</li>
          <li>Check the box for 'I'm not a robot'</li>
          <li>Get the Client ID which is underneath the app name in the upper left-hand corner labeled 'personal use
            script'</li>
          <li>Get the secret from the form (first field on left)</li>
        </ol>
      </div>
      <div class="modal-footer">
        <h2>&nbsp;</h2>
      </div>
    </div>
  </div>
  </div>
  <div class="container" id="main">
    <form id="botForm">
      <legend><span class="number">1</span> User Credentials</legend>
      <input type="text" name="username" required placeholder="Reddit Username">
      <input type="password" name="password" required placeholder="Reddit Password" id="myInput"><i id="icon" class="fa"
        onclick="showPassword()">&#x1f441;</i>
      <legend><span class="number">2</span> Agent Information
      </legend>
      <input type="text" name="userAgent" required placeholder="User Agent">
      <input type="text" name="clientId" required placeholder="Client ID">
      <input type="text" name="secret" required placeholder="Secret">
      <input type="text" name="subreddits" required placeholder="news,pics,funny">
      <input type="text" name="keywords" required placeholder="keyword1,keyword2">
      <textarea name="content" rows="4" required
        placeholder="Enter text exactly as you want it to appear on-screen including line breaks."></textarea>
      <button type="button" id="submitBtn">Create Bot</button>
    </form>
        <pre id="codeBlock"></pre>
  </div>
  <div class="modal2-ctr">
    <button id="modal2-btn">Next Steps</button>
  </div>
  <div id="modal2-div"></div><!-- The Modal -->
  <div id="myModal2" class="modal2">
    <!-- Modal content -->
    <div class="modal2-content">
      <div class="modal2-header">
        <span class="close2">&times;</span>
        <h2>How to Use The Generated Code</h2>
      </div>
      <div class="modal2-body">
        <ol>
          <li>On your desktop, right-click anywhere on screen and select 'New' --> 'Folder'. Folder name should be the same name as the Reddit app you created earlier.</li>
          <li>Open Command Prompt and go to the new folder's directory by entering <strong>cd /Users/{AccountName}/Desktop/{FolderName}</strong>.</li>
          <li>Once in the directory, type the command <strong>python -m pip install praw</strong>.</li>
          <li>Open File Explorer and go to the folder where you installed Python. Type "praw.ini" in the File Explorer search bar. Folder will likely be installed at: C:/Users/{AccountName}/AppData/Local.</li>
          <li>Drag and drop the praw.ini file into the new folder on your desktop, then close File Explorer.</li>
          <li>Right-click on folder created on your desktop in Step 1 and select, 'Open with Code'</li>
          <ol>
            <li>If you don't see the option, 'Open with Code', click <a href="https://code.visualstudio.com/download" target="_blank">here</a> and download the appropriate version of VS Code for your device.</li>
            <li>Once downloaded, open File Explorer, navigate to 'Downloads', and double-click the .exe file. The file name should start with 'VSCodeUserSetup' or something similar.</li>
            <li>Follow the prompts in the installer and make sure to check the box that says 'Add to PATH' or 'Add to Environment Variables' during installation. This will allow you to open VS Code from the right-click context menu.</li>
            <li>Once installation is complete, you may need to restart your computer for the changes to take effect.</li>
            <li>After restarting, right-click on the folder you created earlier and you should now see the 'Open with Code' option. Click 'Open with Code' to open the folder in VS Code.</li>
          </ol>
            <li>In VS Code, click on 'File' --> 'New File'. Name the file the same as your Reddit app and folder name (from Step 1). For file extension, since this will be a Python script, enter '.py' which is the extension for Python files. The file name should look like "RedditBot.py".</li>
            <li>Paste the code generated by the bot into the .py file and save file by going to File > Save or pressing Ctrl + S.</li>
          <li>Test your code by going back into Command Prompt and entering <strong>python{fileName}</strong>. For example, if the script file was named "RedditBot.py", you would enter <strong><strong>pythonRedditBot.py"</strong></strong>. Then press Enter.</li>
        </ol>
      </div>
      <div class="modal2-footer">
        <h2>&nbsp;</h2>
      </div>
    </div>
  </div>
</div>
  <script>
    function showPassword() {
      var x = document.getElementById("myInput");
      if (x.type === "password") {
        x.type = "text";
      } else {
        x.type = "password";
      }
    }
  </script>

  <script>

    const form = document.getElementById("botForm");
    const submitBtn = document.getElementById("submitBtn");
    const codeBlock = document.getElementById("codeBlock");

    let step = 1;

    submitBtn.addEventListener("click", () => {
      if (step === 1) {
        submitBtn.innerHTML = "Confirm Values.<br>Click Again to Generate Code.";
        step = 2;
      } else {
        const formData = Object.fromEntries(new FormData(form).entries());
        document.getElementById("submitBtn").style.display = "none";
        localStorage.setItem("redditBotConfig", JSON.stringify(formData));

        const subs = formData.subreddits.split(",").map(s => s.trim()).filter(Boolean);
        const keywords = formData.keywords.split(",").map(k => `'${k.trim()}'`).filter(Boolean); // Build template

        const template = `

import praw
import os
from time import sleep

userAgent = '${formData.userAgent}'
clientId = '${formData.clientId}'
secret = '${formData.secret}'
username = '${formData.username}'
password = '${formData.password}'

reddit = praw.Reddit(
    user_agent=userAgent,
    client_id=clientId,
    client_secret=secret,
    username=username,
    password=password,
)

subreddits = ["${subs.join('", "')}"]

content = """${formData.content}"""

keywords = {${keywords.join(", ")}}

resultsCount = 0

for sub in subreddits:
    subreddit = reddit.subreddit(sub)
    # Check posts
    for submission in subreddit.hot(limit=20):
        text = (submission.title + " " + submission.selftext).lower()
        if any(keyword.lower() in text for keyword in keywords):
            if submission.author and submission.author.name.lower() == username.lower():
                continue
            print("Bot replying to post: ")
            print("Title: ", submission.title)
            print("Text: ", submission.selftext)
            print("----------------------------")
            print(content, "This was generated by a bot!")
            print()
            try:
                submission.reply(content)
                resultsCount += 1
                sleep(60)
            except Exception as e:
                print("Error replying to post: ", e)
        # Check comments
        submission.comments.replace_more(limit=0)
        for comment in submission.comments.list():
            if any(keyword.lower() in comment.body.lower() for keyword in keywords):
                print("Bot replying to comment: ")
                print("Comment: ", comment.body)
                print("----------------------------")
                try:
                    comment.reply(content)
                    resultsCount += 1
                    sleep(120)
                except Exception as e:
                    print("Error replying to comment: ", e)

if resultsCount == 0:
    print()
    print("Sorry. I didn't find any posts or comments with those keywords.")
        `;

        // Show code
        codeBlock.style.display = "block";
        codeBlock.textContent = template;
      }
    });
  </script>

  <script>

    var modal = document.getElementById("myModal");
    var btn = document.getElementById("modal-btn");
    var span = document.getElementsByClassName("close")[0];

    btn.onclick = function () {
      modal.style.display = "block";
    }

    span.onclick = function () {
      modal.style.display = "none";
    }

    window.onclick = function (event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
  </script>

  <script>

    var modal2 = document.getElementById("myModal2");
    var btn2 = document.getElementById("modal2-btn");
    var span = document.getElementsByClassName("close2")[0];

    btn2.onclick = function () {
      modal2.style.display = "block";
    }

    span.onclick = function () {
      modal2.style.display = "none";
    }

    window.onclick = function (event) {
      if (event.target == modal2) {
        modal2.style.display = "none";
      }
    }
  </script>
</body>
</html>
